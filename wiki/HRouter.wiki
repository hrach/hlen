#labels Phase-Implementation
= HRouter =

HRouter je téměř nejmocnější třída ve frameworku. Díky ní můžete jednoduše parsovat předané URL, vytvářet podmínky, odchytávat požadavky na alternativní zdroj (RSS, XML, apod.).

== Základní nastavení, ukázka ==

Třída HRouter ve výchozím nastavení parsuje URL pomocí následujícího volání:

{{{
HRouter::connect(':controller/:action/*');
}}}

První fragment bude použit jako controller, druhý bude název metody dané třídy a zbytek fragmentů se použije jako argumenty dané metody.

Tomuto pravidlu vyhoví URL s počtem fragmentů >= 2.

== V praxi ==

Třídu lze samozřejmě používat samostatně. Jak tedy na to.
Nejdříve klaisicky includujte soubro "hrouter.php". Celou akci pak spustíte pomocí metody start:

{{{
public static function start($url, $router, $isFile = true)
}}}

První parametr obsahuje samostatné URL, jako druhý parametr se předává název souboru, nebo volatelná funkce, respektive metoda objektu.

Soubor nebo funkce pak obsahují volání routetu, které upravují jeho chování. Výsledek "růtování" potom přebíráme z jeho členských proměnných:

{{{
HRouter::$controller
HRouter::$method
HRouter::$args
}}}

== Možnosti volání metody `connect` ==

{{{
HRouter::connect($rule, $options);
}}}

Metoda `connect` očekává dva argumenty. Prvním je `$rule` ve tvaru řetězce, jako druhý parametr se předává pole `$options` s pokročilou konfigurací.

`$rule` udává, kdy se daný routing provede. Může obsahovat speciální výrazy a to:

 * `:controller`
 * `:action`
 * `:arg`

Při routingu se postupně porovnává fragment po fragmentu. Pokud HRouter narazí na jeden z těchto výrazů, pak mu vyhoví jakýkoliv řetězec, a zároveň se nastaví přílušná proměnná.

Příklady kdy `$rule` bude vyhovovat url `/test/edit/5`:

{{{
// vyhovuje:      ne
HRouter::connect('/test/edit');

// vyhovuje:      ano
HRouter::connect('/test/edit/:arg');

// vyhovuje:      ano
HRouter::connect('/test/edit/*');

// vyhovuje:      ano
HRouter::connect('/test/edit/5');

// vyhovuje:      ne
HRouter::connect('/test/edit/55');
}}}

Možnost jednoduchého přepisu url - prohození controller a metody:

{{{
HRouter::connect('/:action/:controller/*');
}}}